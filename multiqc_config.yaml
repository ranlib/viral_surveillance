report_comment: >
  This report has been generated by the <a href="https://github.com/ranlib/viral_surveillance" target="_blank">ranlib/viral_surveillance</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://github.com/ranlib/viral_surveillance" target="_blank">documentation</a>.

data_format: "yaml"

max_table_rows: 10000

read_count_multiplier: 0.001
read_count_prefix: "K"
read_count_desc: "thousands"

run_modules:
  - custom_content
  - fastqc
  - fastp
  - kraken
  - samtools

module_order:
  - fastqc:
      name: "PREPROCESS: FastQC (raw reads)"
      anchor: "fastqc"
      info: "Results for the raw reads before adapter trimming."
      path_filters:
        - "*001_fastqc.zip"

  - fastp:
      name: "PREPROCESS: fastp (trimming)"
      anchor: "fastp"
      info: "Results for reads after adapter and quality trimming."
      path_filters:
        - "*fastp.json"

  - fastqc:
      name: "PREPROCESS: FastQC (trimmed reads)"
      anchor: "fastqc"
      info: "Results for the raw reads before adapter trimming."
      path_filters:
        - "*trimmed_fastqc.zip"

  - custom_content:
      name: "PREPROCESS: Host contamination"
      info: "Results of host depletion workflow."

  - kraken:
      name: "DETECTION: Kraken 2"
      info: "Kraken 2 classification results for reads after adapter trimming with fastp."

  - samtools:
      name: "STATISTICS: SAMTools"
      anchor: "samtools"
      info: "SAMTools counts/statistics after mapping."
      path_filters:
        - "samtools*"

custom_data:
  host_contamination:
    file_format: tsv
    section_name: "PREPROCESS: Host contamination"
    description: "Results of host depletion workflow."
    plot_type: table
    pconfig:
      id: host_fraction
      title: Host Fraction

sp:
  host_contamination:
    fn: "*.host_contamination.tsv"

table_columns_visible:
  host_contamination:
    qc_flag: true

table_conditional_formatting:
  host_contamination:
    qc_flag:
      PASS:
        background: "#c7e9c0"
      WARN:
        background: "#fff7bc"
      FAIL:
        background: "#fcbba1"
